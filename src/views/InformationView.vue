<template>
  <div>
    <section id="info1">
      <div class="titreinfo">
        <h1>{{ $t("info.titre.h1") }}</h1>
      </div>
      <p>{{ $t("info.titre.p1") }}</p>
      <div class="partieinfo">
        <h1>{{ $t("info.partie1.h2") }}</h1>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_1") }}</h3>
          <p>{{ $t("info.partie1.p2") }}</p>
          <p>{{ $t("info.partie1.p2suite") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_2") }}</h3>
          <p>{{ $t("info.partie1.p3") }}</p>
          <p>{{ $t("info.partie1.p3suite") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_3") }}</h3>
          <p>{{ $t("info.partie1.p4") }}</p>
          <p>{{ $t("info.partie1.p4suite") }}</p>
        </div>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_4") }}</h3>
          <p>{{ $t("info.partie1.p5") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_5") }}</h3>
          <p>{{ $t("info.partie1.p6") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_6") }}</h3>
          <p>{{ $t("info.partie1.p7") }}</p>
          <p>{{ $t("info.partie1.p7suite") }}</p>
        </div>
      </div>
      <div class="grid2">
        <div class="grid2-forme">
          <div class="grid2-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_7") }}</h3>
          <p>{{ $t("info.partie1.p8") }}</p>
          <p>{{ $t("info.partie1.p8suite") }}</p>
        </div>
        <div class="grid2-forme">
          <div class="grid2-forme-fond">
          </div>
          <h3>{{ $t("info.partie1.h3_8") }}</h3>
          <p>{{ $t("info.partie1.p9") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info.partie2.h2") }}</h1>
        <h3>{{ $t("info.partie2.h3_1") }}</h3>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie2.h3_2") }}</h3>
          <p>{{ $t("info.partie2.p1") }}</p>
          <p>{{ $t("info.partie2.p1suite") }}</p>
          <p>{{ $t("info.partie2.p1suite2") }}</p>
          <p>{{ $t("info.partie2.p1suite3") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie2.h3_3") }}</h3>
          <p>{{ $t("info.partie2.p2") }}</p>
          <p>{{ $t("info.partie2.p2suite") }}</p>
          <p>{{ $t("info.partie2.p2suite2") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info.partie2.h3_4") }}</h3>
          <p>{{ $t("info.partie2.p3") }}</p>
          <p>{{ $t("info.partie2.p3suite") }}</p>
          <p>{{ $t("info.partie2.p3suite2") }}</p>
          <p>{{ $t("info.partie2.p3suite3") }}</p>
          <p>{{ $t("info.partie2.p3suite4") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h3>{{ $t("info.partie3.h3_1") }}</h3>
      </div>
      <div class="grid2">
        <div class="grid2-forme">
          <div class="grid2-forme-fond">
          </div>
          <h3>{{ $t("info.partie3.h3_2") }}</h3>
          <p>{{ $t("info.partie3.p1") }}</p>
          <p>{{ $t("info.partie3.p1suite") }}</p>
        </div>
        <div class="grid2-forme">
          <div class="grid2-forme-fond">
          </div>
          <h3>{{ $t("info.partie3.h3_3") }}</h3>
          <p>{{ $t("info.partie3.p2") }}</p>
          <p>{{ $t("info.partie3.p2suite") }}</p>
          <p>{{ $t("info.partie3.p2suite2") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info.partie4.h2") }}</h1>
        <p>{{ $t("info.partie4.p1") }}</p>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_1") }}</h3>
          <p>{{ $t("info.partie4.p2") }}</p>
          <p>{{ $t("info.partie4.p2suite") }}</p>
          <p>{{ $t("info.partie4.p2suite2") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_2") }}</h3>
          <p>{{ $t("info.partie4.p3") }}</p>
          <p>{{ $t("info.partie4.p3suite") }}</p>
          <p>{{ $t("info.partie4.p3suite2") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_3") }}</h3>
          <p>{{ $t("info.partie4.p4") }}</p>
          <p>{{ $t("info.partie4.p4suite") }}</p>
          <p>{{ $t("info.partie4.p4suite2") }}</p>
        </div>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_4") }}</h3>
          <p>{{ $t("info.partie4.p5") }}</p>
          <p>{{ $t("info.partie4.p5suite") }}</p>
          <p>{{ $t("info.partie4.p5suite2") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_5") }}</h3>
          <p>{{ $t("info.partie4.p6") }}</p>
          <p>{{ $t("info.partie4.p6suite") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info.partie4.h3_6") }}</h3>
          <p>{{ $t("info.partie4.p7") }}</p>
          <p>{{ $t("info.partie4.p7suite") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info.partie5.h2") }}</h1>
        <p>{{ $t("info.partie5.p") }}</p>
        <p>{{ $t("info.partie5.p2") }}</p>
      </div>
      <button @click="startQuestionnaire1">{{ $t("info.partie5.button") }}</button>
    </section>
    <section v-if="showQuestionnaire1 && currentQuestions && currentQuestions[currentQuestionIndex] && !questionnaireCompleted(1)">
      <div>
        <h1>{{ currentQuestions[currentQuestionIndex].title }}</h1>
        <p>{{ currentQuestions[currentQuestionIndex].description }}</p>
        <div v-for="(option, optionIndex) in currentQuestions[currentQuestionIndex].options" :key="optionIndex">
          <input type="radio" :id="`option-${optionIndex}`" :value="option" :name="`question-${currentQuestionIndex}`" v-model="selectedOption">
          <label :for="`option-${optionIndex}`">{{ option }}</label>
        </div>
        <button @click="envoyerScore" :disabled="!selectedOption">Envoyer</button>
      </div>
    </section>
    <section id="info2">
      <div class="titreinfo">
        <h1>{{ $t("info2.titre.h1") }}</h1>
      </div>
      <p>{{ $t("info2.titre.p") }}</p>
      <div class="partieinfo">
        <h1>{{ $t("info2.partie1.h1") }}</h1>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie1.h3") }}</h3>
          <p>{{ $t("info2.partie1.p") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie1.h3_2") }}</h3>
          <p>{{ $t("info2.partie1.p2") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie1.h3_3") }}</h3>
          <p>{{ $t("info2.partie1.p3") }}</p>
        </div>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie1.h3_4") }}</h3>
          <p>{{ $t("info2.partie1.p4") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info2.partie2.h1") }}</h1>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie2.h3") }}</h3>
          <p>{{ $t("info2.partie2.p") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie2.h3_2") }}</h3>
          <p>{{ $t("info2.partie2.p2") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie2.h3_3") }}</h3>
          <p>{{ $t("info2.partie2.p3") }}</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>{{ $t("info2.partie2.h3_4") }}</h3>
          <p>{{ $t("info2.partie2.p4") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info2.partie3.h1") }}</h1>
        <p>{{ $t("info2.partie3.p") }}</p>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>{{ $t("info2.partie3.h3") }}</h3>
          <p>{{ $t("info2.partie3.p2") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info2.partie3.h3_2") }}</h3>
          <p>{{ $t("info2.partie3.p3") }}</p>
        </div>
        <div class="grid3-forme">
          <h3>{{ $t("info2.partie3.h3_3") }}</h3>
          <p>{{ $t("info2.partie3.p4") }}</p>
        </div>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>{{ $t("info2.partie3.h3_4") }}</h3>
          <p>{{ $t("info2.partie3.p5") }}</p>
          <p>{{ $t("info2.partie3.p5suite") }}</p>
          <p>{{ $t("info2.partie3.p5suite2") }}</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>{{ $t("info2.partie4.h1") }}</h1>
        <p>{{ $t("info2.partie4.p") }}</p>
        <br>
        <p>{{ $t("info2.partie4.p2") }}</p>
      </div>
      <button @click="startQuestionnaire2">{{ $t("info2.partie4.button") }}</button>
    </section>
    <section v-if="showQuestionnaire2 && currentQuestions && currentQuestions[currentQuestionIndex] && !questionnaireCompleted(2)">
      <div>
        <h1>{{ currentQuestions[currentQuestionIndex].title }}</h1>
        <p>{{ currentQuestions[currentQuestionIndex].description }}</p>
        <div v-for="(option, optionIndex) in currentQuestions[currentQuestionIndex].options" :key="optionIndex">
          <input type="radio" :id="`option-${optionIndex}`" :value="option" :name="`question-${currentQuestionIndex}`" v-model="selectedOption">
          <label :for="`option-${optionIndex}`">{{ option }}</label>
        </div>
        <button @click="envoyerScore" :disabled="!selectedOption">Envoyer</button>
      </div>
    </section>
    <section id="info3">
      <div class="titreinfo">
        <h1>Le réchauffement climatique</h1>
      </div>
      <p>Le réchauffement climatique est un phénomène global caractérisé par une augmentation des températures moyennes de la Terre, résultant principalement de l'accumulation des gaz à effet de serre (GES) dans l'atmosphère. Ces gaz, tels que le dioxyde de carbone (CO2), le méthane (CH4) et le protoxyde d'azote (N2O), piègent la chaleur du soleil dans l'atmosphère, provoquant ainsi une hausse des températures à la surface de la planète. La combustion des combustibles fossiles, l'agriculture intensive, la déforestation, et diverses autres activités humaines contribuent à cette accumulation, entraînant des changements climatiques dangereux et imprévisibles.</p>
      <div class="partieinfo">
        <h1>Causes</h1>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Combustion des combustibles fossiles</h3>
          <p>- L'utilisation de pétrole, de charbon, et de gaz naturel pour l'énergie libère d'énormes quantités de CO2.</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Déforestation</h3>
          <p>- L'abattage des forêts réduit la capacité de la Terre à absorber le CO2 de l'atmosphère.</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Agriculture</h3>
          <p>- Les pratiques agricoles produisent du méthane et du protoxyde d'azote, deux puissants gaz à effet de serre.</p>
        </div>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Industrie</h3>
          <p>- Les procédés industriels émettent une grande variété de gaz à effet de serre.</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>Conséquences</h1>
      </div>
      <div class="grid">
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Changements climatiques extrêmes</h3>
          <p>- Augmentation de la fréquence et de l'intensité des tempêtes, inondations, sécheresses et canicules.</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Montée du niveau des mers</h3>
          <p>- La fonte des glaces polaires et des glaciers entraîne une élévation du niveau des mers, menaçant les zones côtières.</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Perturbations des écosystèmes</h3>
          <p>- Modification des habitats naturels, mettant en danger la survie de nombreuses espèces.</p>
        </div>
        <div class="grid-forme">
          <div class="grid-forme-fond">
          </div>
          <h3>Insécurité alimentaire</h3>
          <p>- Les changements climatiques affectent la production agricole, menaçant la sécurité alimentaire mondiale.</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>Conseil et Recommandation</h1>
        <p>Pour lutter contre le réchauffement climatique, des actions individuelles et collectives sont nécessaires.</p>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>Réduction de la consommation d'énergie</h3>
          <p>- Améliorer l'efficacité énergétique des habitations, des transports et des appareils.</p>
        </div>
        <div class="grid3-forme">
          <h3>Utilisation d'énergies renouvelables</h3>
          <p>- Favoriser le solaire, l'éolien, l'hydroélectricité et la biomasse.</p>
        </div>
        <div class="grid3-forme">
          <h3>Transports écologiques</h3>
          <p>- Privilégier les transports en commun, le vélo, ou la marche, et envisager les véhicules électriques.</p>
        </div>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>Pratiques alimentaires durables</h3>
          <p>- Réduire la consommation de viande, privilégier les produits locaux et de saison.</p>
        </div>
      </div>
      <div class="grid3">
        <div class="grid3-forme">
          <h3>Sensibilisation et éducation</h3>
          <p>- Informer sur l'importance du réchauffement climatique et encourager les actions pour le combattre.</p>
        </div>
      </div>
      <div class="partieinfo">
        <h1>Conclusion</h1>
        <p>Le réchauffement climatique est un défi majeur pour notre génération. Il exige une transformation profonde de nos modes de vie et de nos économies. En devenant un Pompier du climat, à travers des gestes quotidiens et des décisions éclairées, vous pouvez contribuer à la lutte contre le réchauffement climatique et œuvrer pour un avenir plus durable pour tous.</p>
        <br>
        <p>Pour valider cette quête et tester vos connaissances, nous vous invitons à répondre au questionnaire suivant.</p>
      </div>
      <button @click="startQuestionnaire3">Commencer le questionnaire</button>
    </section>
    <section v-if="showQuestionnaire3 && currentQuestions && currentQuestions[currentQuestionIndex] && !questionnaireCompleted(3)">
      <div>
        <h1>{{ currentQuestions[currentQuestionIndex].title }}</h1>
        <p>{{ currentQuestions[currentQuestionIndex].description }}</p>
        <div v-for="(option, optionIndex) in currentQuestions[currentQuestionIndex].options" :key="optionIndex">
          <input type="radio" :id="`option-${optionIndex}`" :value="option" :name="`question-${currentQuestionIndex}`" v-model="selectedOption">
          <label :for="`option-${optionIndex}`">{{ option }}</label>
        </div>
        <button @click="envoyerScore" :disabled="!selectedOption">Envoyer</button>
      </div>
    </section>
    <RouterLink v-if="questionnaireCompleted(1) && questionnaireCompleted(2) && questionnaireCompleted(3)" to="/Resultat">Voir le Résultat</RouterLink>
  </div>

</template>

<script setup>
import { useRouter } from 'vue-router';
import { useStore } from 'vuex';
import { ref } from 'vue';
import { computed } from 'vue';

const router = useRouter();
const store = useStore();

let showQuestionnaire1 = ref(false);
let showQuestionnaire2 = ref(false);
let showQuestionnaire3 = ref(false);
let selectedOption = ref(null);
let currentQuestions = null;
let currentQuestionIndex = ref(0);
let currentQuestionSet = ref(null);
let userResponses = [];

const questionsInfo1 = [
  {
    title: "Quête 1/4",
    description: "Description de la première question de la section 1.",
    options: ["Réponse A", "Réponse B", "Réponse C", "Réponse D"],
    correctAnswer: "Réponse A",
    answered: false
  },
  {
    title: "Quête 2/4",
    description: "Description de la deuxième question de la section 1.",
    options: ["Réponse A", "Réponse B", "Réponse C", "Réponse D"],
    correctAnswer: "Réponse A",
    answered: false
  },
  {
    title: "Quête 3/4",
    description: "Description de la troisième question de la section 1.",
    options: ["Réponse A", "Réponse B", "Réponse C", "Réponse D"],
    correctAnswer: "Réponse A",
    answered: false

  },
  {
    title: "Quête 4/4",
    description: "Description de la quatrième question de la section 1.",
    options: ["Réponse A", "Réponse B", "Réponse C", "Réponse D"],
    correctAnswer: "Réponse A",
    answered: false

  }
];

const questionsInfo2 = [
  {
    title: "Quête 1/4",
    description: "Description de la première question de la section 2.",
    options: ["Ecole", "Maison", "Bonjour", "Test"],
    correctAnswer: "Ecole"
  },
  {
    title: "Quête 2/4",
    description: "Description de la deuxième question de la section 2.",
    options: ["Ecole", "Maison", "Bonjour", "Test"],
    correctAnswer: "Ecole"
  },
  {
    title: "Quête 3/4",
    description: "Description de la troisième question de la section 2.",
    options: ["Ecole", "Maison", "Bonjour", "Test"],
    correctAnswer: "Ecole"
  },
  {
    title: "Quête 4/4",
    description: "Description de la quatrième question de la section 2.",
    options: ["Ecole", "Maison", "Bonjour", "Test"],
    correctAnswer: "Ecole"
  }
];

const questionsInfo3 = [
  {
    title: "Quête 1/4",
    description: "Description de la première question de la section 3.",
    options: ["Option 1", "Option 2", "Option 3", "Option 4"],
    correctAnswer: "Option 1"
  },
  {
    title: "Quête 2/4",
    description: "Description de la deuxième question de la section 3.",
    options: ["Option 1", "Option 2", "Option 3", "Option 4"],
    correctAnswer: "Option 2"
  },
  {
    title: "Quête 3/4",
    description: "Description de la troisième question de la section 3.",
    options: ["Option 1", "Option 2", "Option 3", "Option 4"],
    correctAnswer: "Option 3"
  },
  {
    title: "Quête 4/4",
    description: "Description de la quatrième question de la section 3.",
    options: ["Option 1", "Option 2", "Option 3", "Option 4"],
    correctAnswer: "Option 4"
  }
];

const currentQuestion = computed(() => getCurrentQuestion());

function getCurrentQuestion() {
  const sectionIndex = Math.floor(currentQuestionIndex.value / 4);
  const questionIndexInSection = currentQuestionIndex.value % 4;
  const questions = currentQuestionSet.value === 1 ? questionsInfo1 :
      currentQuestionSet.value === 2 ? questionsInfo2 :
          questionsInfo3;

  // Vérifier si la question actuelle existe dans la liste des questions
  if (Array.isArray(questions) && questionIndexInSection < questions.length) {
    return questions[questionIndexInSection];
  } else {
    return null;
  }
}


function nextQuestionOrSection() {
  const sectionIndex = Math.floor(currentQuestionIndex.value / 4);

  // Si toutes les questions dans la section actuelle ont été répondues
  if (currentQuestionIndex.value === currentQuestions.value.length - 1) {
    // Passer à la section suivante ou au résultat
    if (sectionIndex + 1 === 1) {
      showQuestionnaire1.value = false;
      showQuestionnaire2.value = true;
      currentQuestionIndex.value = 0;
      currentQuestions = ref(questionsInfo2); // Mettre à jour currentQuestions avec les questions de la deuxième section
      currentQuestionSet.value = 2;
    } else if (sectionIndex + 1 === 2) {
      showQuestionnaire2.value = false;
      showQuestionnaire3.value = true;
      currentQuestionIndex.value = 0;
      currentQuestions = ref(questionsInfo3); // Mettre à jour currentQuestions avec les questions de la troisième section
      currentQuestionSet.value = 3;
    } else if (sectionIndex + 1 === 3) {
      // Rediriger vers la page "Résultat"
      router.push({ name: 'Resultat', params: { responses: userResponses } });
    }
  } else {
    // Passer à la question suivante dans la même section
    currentQuestionIndex.value++;
  }
}

function isLastQuestionInSet() {
  return currentQuestionSet.value === 3 && currentQuestionIndex.value === questionsInfo3.length - 1;
}

function questionnaireCompleted(section) {
  const questions = section === 1 ? questionsInfo1 :
      section === 2 ? questionsInfo2 :
          questionsInfo3;

  return questions.every(question => question.answered);
}

function envoyerScore() {
  const question = currentQuestion.value;

  // Vérifier si une question existe
  if (!question) {
    console.error("Aucune question n'a été trouvée.");
    return;
  }

  // Vérifier si une réponse a été sélectionnée
  if (!selectedOption.value) {
    console.log("Aucune réponse sélectionnée.");
    return;
  }

  // Marquer la question comme répondue
  question.answered = true;

  // Vérifier si la réponse sélectionnée est correcte
  if (question.correctAnswer === selectedOption.value) {
    store.commit('updateScore', 1);
    console.log("Réponse correcte !");
  }

  // Stocker la réponse de l'utilisateur
  userResponses.push({
    question: question.title,
    response: selectedOption.value,
    correct: question.correctAnswer === selectedOption.value
  });

  // Vérifier si toutes les questions de la section ont été répondues
  const sectionIndex = Math.floor(currentQuestionIndex.value / 4);
  const unansweredQuestions = currentQuestions.value.slice(sectionIndex * 4, (sectionIndex + 1) * 4).filter(q => !q.answered);

  if (unansweredQuestions.length === 0) {
    // Si toutes les questions de la section ont été répondues, passer à la section suivante ou au résultat
    nextQuestionOrSection();
  } else {
    // Passer à la question suivante dans la même section
    currentQuestionIndex.value++;
  }

  // Masquer la section actuelle une fois que l'utilisateur a terminé de répondre aux questions dans chaque section respective
  if (currentQuestionSet.value === 1 && currentQuestionIndex.value === questionsInfo1.length) {
    showQuestionnaire1.value = false;
  } else if (currentQuestionSet.value === 2 && currentQuestionIndex.value === questionsInfo2.length) {
    showQuestionnaire2.value = false;
  } else if (currentQuestionSet.value === 3 && currentQuestionIndex.value === questionsInfo3.length) {
    showQuestionnaire3.value = false;
  }

  // Rediriger vers la page "Résultat" une fois que l'utilisateur a terminé de répondre à toutes les questions
  if (currentQuestionSet.value === 3 && currentQuestionIndex.value === questionsInfo3.length - 1 && unansweredQuestions.length === 0) {
    router.push({ name: 'Resultat', params: { responses: userResponses } });
  }
}


function startQuestionnaire1() {
  showQuestionnaire1.value = true;
  showQuestionnaire2.value = false;
  showQuestionnaire3.value = false;
  currentQuestionIndex.value = 0;
  currentQuestions = ref(questionsInfo1);
  currentQuestionSet.value = 1;
}

function startQuestionnaire2() {
  showQuestionnaire1.value = false;
  showQuestionnaire2.value = true;
  showQuestionnaire3.value = false;
  currentQuestionIndex.value = 0;
  currentQuestions = ref(questionsInfo2);
  currentQuestionSet.value = 2;
}

function startQuestionnaire3() {
  showQuestionnaire1.value = false;
  showQuestionnaire2.value = false;
  showQuestionnaire3.value = true;
  currentQuestionIndex.value = 0;
  currentQuestions = ref(questionsInfo3);
  currentQuestionSet.value = 3;
}

</script>

<style lang="scss">
@import "/public/css/scss_page/information";
</style>
